!function(a,b){function c(a){return void 0===a}function d(d,e,f,g){if(c(g)||null===g)return null;var h=a.JSON.parse(d.getItem(e));null===h&&(h={});var i={};return i[f]=g,b.extend(h,i),d.setItem(e,a.JSON.stringify(h)),g}function e(b,d,e){var f=a.JSON.parse(b.getItem(d));return null===f&&(f={}),c(f[e])?null:f[e]}function f(a,b){a.removeItem(b)}function g(a){return"boolean"===b.type(a)}function h(a){return"object"===b.type(a)}function i(a){return"string"===b.type(a)&&b.trim(a).length>0}function j(a,b){return i(a)?a:b}var k="submit.mermery.js",l=/^(?:CLEAR|REMOVE|STASH|UNSTASH)$/i;b.fn.extend({mermery:function(m,n){n=b.extend({},b.fn.mermery.options,n),n.clearOnSubmit=n.clear_on_submit,n.clearOnUnload=n.clear_on_unload,n.storageMethod=n.storage_method,n.storageKey=n.storage_key,n.storageKeyPrefix=n.storage_key_prefix;var o=null;if(i(n.storageMethod)?o="LOCAL"===n.storageMethod.toUpperCase()?a.localStorage:a.sessionStorage:null!==n.storageMethod&&h(n.storageMethod)&&(o=n.storageMethod),null===o||!(h(o)&&"getItem"in o&&"removeItem"in o&&"setItem"in o))return this;m=i(m)&&l.test(m)?m.toUpperCase():"STASH";var p="input[id], input[name], select[id], select[name], textarea[id], textarea[name]";return n.storageKey=j(n.storageKey,"mermery"),n.storageKeyPrefix=j(n.storageKeyPrefix,""),this.each(function(){var h=b(this),j=h.attr("data-mermery"),l=n.storageKeyPrefix+(i(j)?j:n.storageKey);switch(m){case"CLEAR":case"REMOVE":f(o,l);break;case"UNSTASH":h.find("*").filter(p).each(function(){var a=b(this),d=a.attr("name");if(c(d)&&(d=a.attr("id"),c(d)))return h;var f=null;switch(this.tagName){case"INPUT":case"TEXTAREA":var g=a.attr("type");if("checkbox"===g){var j=a.attr("value");i(j)||(j=""),f=e(o,l,d+j),null!==f&&f!==this.checked&&(this.checked=f===!0,a.trigger("change"))}else"radio"===g?(f=e(o,l,d),null!==f&&f!==this.checked&&(this.checked=a.val()===f,a.trigger("change"))):(f=e(o,l,d),null!==f&&!a.is("[readonly]")&&a.is(":enabled")&&a.val()!==f&&a.val(f).trigger("change"));break;case"SELECT":f=e(o,l,d),null!==f&&b.each(b.isArray(f)?f:[f],function(c,d){a.find("option").filter(function(){var a=b(this);return a.val()===d||a.html()===d}).prop("selected",!0).trigger("change")})}});break;case"STASH":h.find("*").filter(p).each(function(){var a=b(this),e=a.attr("name");if(!c(e)||(e=a.attr("id"),!c(e))){var f=a.attr("value"),g="checkbox"!==this.type||c(f)?e:e+f;d(o,l,g,"checkbox"===this.type?a.prop("checked"):a.val())}}),h.on(k,function(){(!g(n.clearOnSubmit)||n.clearOnSubmit)&&f(o,l)}),b(a).unload(function(){(!g(n.clearOnUnload)||n.clearOnUnload)&&f(o,l)})}})}}),b.fn.mermery.options={clear_on_submit:!0,clear_on_unload:!0,storage_method:"session",storage_key:"mermery",storage_key_prefix:""},b(function(){b("form.mermery, form[data-mermery]").mermery()})}(window,window.jQuery);